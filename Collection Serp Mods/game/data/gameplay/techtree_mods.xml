<techtreemods>

  <!-- Info: -->
  <!-- a Volatile OBTAINABLE tech (OBTAINABLE from beginning) is also executed for Nature player! -->
    <!-- add ignoreNature='' to effect to prevent this -->
    
    
    
  <!-- ############################################################################################################### -->
  <!-- ############################   Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################   Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################   Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################   Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################   Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  SkyPassage for Everyone Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  <tech name="AlwaysStuff_SkyPassage_LowHealth_Serp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>1.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <effect type="Data" amount="1.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">SkyPassage_LowHealth_Serp</target>
      </effect>
      <!-- allow everyone to build it (otherwise they can not build on the construction site..) -->
      <effect type="Data" amount="1.00" subtype="CommandAdd" proto="SkyPassage_LowHealth_Serp" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">AbstractVillager</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" proto="SkyPassage_LowHealth_Serp" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">LogicalTypeNorseSoldierThatBuilds</target>
      </effect>
      <effect type="TechStatus" status="obtainable">Disable_SkyPassage_LowHealth_Serp</effect>
    </effects>
  </tech>
  
  <!-- disable again if playing Oranos -->
  <tech mergeMode="add" name="Disable_SkyPassage_LowHealth_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <Civilization>
        <civName>Oranos</civName>
      </Civilization>
    </prereqs>
    <effects>
      <effect type="Data" amount="0.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">SkyPassage_LowHealth_Serp</target>
      </effect>
    </effects>
  </tech>
  
  <!-- ############################################################################################################### -->
  <!-- ############################ SkyPassage for Everyone End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Heroes Regen Health Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  <!-- This overwrites the UnitRegenRate for every hero (doing relativity="Absolute" afterwards adds on top of this value without problems, eg. HeroicRenewal) -->
  <!-- Some heroes have no regen, others have regen of 1 and some campaign hereoes have regen of 2 in vanilla. So I think 1.5 for all is fine. -->
  
  <!-- UnitRegenCombatMultiplier seems not to work? at least not displayed, also not for vanilla. so leave it out -->
        
  <tech name="AlwaysStuff_HeroRegenSerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>1.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <effect type="Data" amount="1.50" subtype="UnitRegenRate" relativity="Assign">
        <target type="ProtoUnit">Hero</target>
      </effect>
    </effects>
  </tech>
  
  <!-- ############################################################################################################### -->
  <!-- ############################  End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Bonusdamage Human against Hero Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  <tech mergeMode="add" name="AlwaysStuff_BonusAgainstHeroes_Serp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <effect type="Data" allactions="1" amount="0.50" subtype="Damagebonus" unittype="Hero" relativity="Absolute">
        <target type="ProtoUnit">HumanSoldier</target>
      </effect>
    </effects>
  </tech>
  
  <!-- ############################################################################################################### -->
  <!-- ############################ Bonusdamage Human against Hero End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Generic Heroes Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  <!-- AI does not recruit newly added heroes and AI modding is not additive...  -->
   <!-- so we will make the AI units automatically spawn the heros on recruitment of the base unit sometimes -->
  
  <tech name="Peltast_To_Hero_Serp" type="Normal">
    <displaynameid>STR_HUD_UNIT_TYPE_HERO</displaynameid>
    <cost resourcetype="Food">20.0000</cost>
    <cost resourcetype="Gold">15.0000</cost>
    <cost resourcetype="Favor">1.0000</cost>
    <researchpoints>0.1000</researchpoints>
    <status>UNOBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <techtype>HeroPromotion</techtype>
  </tech>
  <tech name="Axeman_To_Hero_Serp" type="Normal">
    <displaynameid>STR_HUD_UNIT_TYPE_HERO</displaynameid>
    <cost resourcetype="Food">50.0000</cost>
    <cost resourcetype="Gold">10.0000</cost>
    <cost resourcetype="Favor">1.0000</cost>
    <researchpoints>0.1000</researchpoints>
    <status>UNOBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <techtype>HeroPromotion</techtype>
  </tech>
  <tech name="WuzuJavelineer_To_Hero_Serp" type="Normal">
    <displaynameid>STR_HUD_UNIT_TYPE_HERO</displaynameid>
    <cost resourcetype="Food">15.0000</cost>
    <cost resourcetype="Gold">30.0000</cost>
    <cost resourcetype="Favor">1.0000</cost>
    <researchpoints>0.1000</researchpoints>
    <status>UNOBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <techtype>HeroPromotion</techtype>
  </tech>
  
  <tech name="AlwaysMassHeroes_Serp">
    <status>OBTAINABLE</status>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>1.0000</delay>
    <flag>DelayedFirstActivation</flag>   
    <flag>NeverAutoResearch</flag> 
    <effects>
      <effect type="TechStatus" status="obtainable">AI_SpawnHeroGreek_Serp</effect>
      <effect type="TechStatus" status="obtainable">AI_SpawnHeroEgypt_Serp</effect>
      <effect type="TechStatus" status="obtainable">AI_SpawnHeroChinese_Serp</effect>
    </effects>
  </tech>
  
  <tech name="AI_SpawnHeroGreek_Serp">
    <status>UNOBTAINABLE</status>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <flag>NeverAutoResearch</flag> 
    <prereqs>
      <Culture>
        <cultureName>Greek</cultureName>
      </Culture>
      <techstatus status="Active">IsComputerPlayer_Serp</techstatus>
    </prereqs>
    <effects>
      <effect type="Data" amount="1.00" subtype="ModifySpawn" spawntype="Birth" proto="Peltast_Hero_Serp" chance="0.12" relativity="Absolute">
        <target type="ProtoUnit">HumanSoldier</target>
      </effect>
    </effects>
  </tech>
  <tech name="AI_SpawnHeroEgypt_Serp">
    <status>UNOBTAINABLE</status>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <flag>NeverAutoResearch</flag> 
    <prereqs>
      <Culture>
        <cultureName>Egyptian</cultureName>
      </Culture>
      <techstatus status="Active">IsComputerPlayer_Serp</techstatus>
    </prereqs>
    <effects>
      <effect type="Data" amount="1.00" subtype="ModifySpawn" spawntype="Birth" proto="Axeman_Hero_Serp" chance="0.12" relativity="Absolute">
        <target type="ProtoUnit">HumanSoldier</target>
      </effect>
    </effects>
  </tech>
  <tech name="AI_SpawnHeroChinese_Serp">
    <status>UNOBTAINABLE</status>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <flag>NeverAutoResearch</flag> 
    <prereqs>
      <Culture>
        <cultureName>Chinese</cultureName>
      </Culture>
      <techstatus status="Active">IsComputerPlayer_Serp</techstatus>
    </prereqs>
    <effects>
      <effect type="Data" amount="1.00" subtype="ModifySpawn" spawntype="Birth" proto="WuzuJavelineer_Hero_Serp" chance="0.12" relativity="Absolute">
        <target type="ProtoUnit">HumanSoldier</target>
      </effect>
    </effects>
  </tech>
  
  <!-- ############# -->
  
  <tech name="ArchaicAgeGreek">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">Peltast_Hero_Serp</target>
      </effect>
      <effect type="TechStatus" status="active">Peltast_To_Hero_Serp</effect>
    </effects>
  </tech>
  <tech name="ArchaicAgeChinese">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">WuzuJavelineer_Hero_Serp</target>
      </effect>
      <effect type="TechStatus" status="active">WuzuJavelineer_To_Hero_Serp</effect>
    </effects>
  </tech>
  <tech name="ArchaicAgeEgyptian">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect type="TechStatus" status="active">Axeman_To_Hero_Serp</effect>
    </effects>
  </tech>
  
  
  <tech name="ArchaicAgeWeakenUnits">
    <effects>
      <effect mergeMode="add" type="Data" allactions="1" amount="0.20" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">Peltast_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" allactions="1" amount="0.20" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">WuzuJavelineer_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" allactions="1" amount="0.20" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
    </effects>
  </tech>
  
  
  
  <!-- heroes get same upgrades like the base unit -->
  
  <!-- greek and chinese -->
  <tech name="MediumArchers">
    <effects>
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">WuzuJavelineer_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="WuzuJavelineer_Hero_Serp" newname="STR_UNIT_MEDIUM_WUZU_JAVELINEER_NAME">
      </effect>
      
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">Peltast_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="Peltast_Hero_Serp" newname="STR_UNIT_MEDIUM_PELTAST_NAME">
      </effect>
    </effects>
  </tech>
  
  <tech name="HeavyArchers">
    <effects>
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">WuzuJavelineer_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="WuzuJavelineer_Hero_Serp" newname="STR_UNIT_HEAVY_WUZU_JAVELINEER_NAME">
      </effect>
      
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">Peltast_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="Peltast_Hero_Serp" newname="STR_UNIT_HEAVY_PELTAST_NAME">
      </effect>
    </effects>
  </tech>
  
  
  <tech name="ChampionArchers">
    <effects>
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">WuzuJavelineer_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="WuzuJavelineer_Hero_Serp" newname="STR_UNIT_CHAMPION_WUZU_JAVELINEER_NAME">
      </effect>
      
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">Peltast_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="Peltast_Hero_Serp" newname="STR_UNIT_CHAMPION_PELTAST_NAME">
      </effect>
    </effects>
  </tech>
  
  
  <!-- egypt -->
  
  <tech name="ScallopedAxe">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.15" subtype="Damage" action="HandAttack" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="AxeOfVengeance">
    <effects>
      <effect mergeMode="add" type="Data" action="HandAttack" amount="2.00" subtype="Damagebonus" unittype="Building" relativity="Absolute">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="0.005" subtype="OnDamageModify" modifytype="Damage" relativity="Assign">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="MediumAxemen">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.10" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" action="HandAttack" amount="1.10" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.00" subtype="LOS" relativity="Absolute">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="Axeman_Hero_Serp" newname="STR_UNIT_MEDIUM_AXEMAN_NAME">
      </effect>
    </effects>
  </tech>
  
  <tech name="HeavyAxemen">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.15" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" action="HandAttack" amount="1.15" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.00" subtype="LOS" relativity="Absolute">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="Axeman_Hero_Serp" newname="STR_UNIT_HEAVY_AXEMAN_NAME">
      </effect>
    </effects>
  </tech>
  
  <tech name="ChampionAxemen">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.20" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" action="HandAttack" amount="1.20" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.00" subtype="LOS" relativity="Absolute">
        <target type="ProtoUnit">Axeman_Hero_Serp</target>
      </effect>
      <effect mergeMode="add" type="SetName" proto="Axeman_Hero_Serp" newname="STR_UNIT_CHAMPION_AXEMAN_NAME">
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  Generic Heroes End  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  AreaHeal TownCenter Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- adjusting ModifyTargetLimit for AreaHeal seems not to work..(also ModifyAmount is not what we are looking for) so we have to do it in proto_mods.xml -->
   <!-- but also increasing this value via tech does not work, so it stay at 2 units if I set this in proto. -->
    <!-- we can only compensate this with faster healing -->
  
  <!-- using AbstractSocketedTownCenter to only affect the owns build on settlements -->
  
  <!-- to do sth always, regardless what age we start, load a savegame, which civ we are and so on, simply use an Obtainable Volatile tech without prereqs -->
   <!-- (when loading a savegame prereqs can not properly be checked or even can crash the game (typecount), so dont add them to Volatile+Obtainable techs. delay is only applied to the actions, not the prereqs check) -->
  <!-- bei manchen sachen hilfts wohl auch n delay zuzufügen, bei anderen schadets.. -->
  <tech name="AlwaysStuff_AreaHealTCSerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>1.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="4.0" subtype="ModifyRate" relativity="Percent">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="FortifiedTownCenter">
    <effects>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="3.0" subtype="ModifyRate" relativity="Percent">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
    </effects>    
  </tech>
  
  <!-- compensation, double rate again for this research (it normally enables autoheal at 1/s for all units nearby) -->
  <tech name="FeastsOfRenown">
    <effects>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="2.0" subtype="ModifyRate" relativity="Percent">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  AreaHeal TownCenter End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  AutoScout Military Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- with an OBTAINABLE+Volatile tech we can start our tech code on new games and on savegames for every civ.  -->
   <!-- the OBTAINABLE+Volatile tech can not handle prereqs good, so we will change status from other techs in it which will do the prereqs code -->
  <!-- we use Volatile techs with specificage (instead of adding tickle tech to eg. ClassicalAgeGeneral) to have it compatible to savegames enabling this mod -->
  <!-- needs the delay for whatever reason to work properly for new and savegames -->
  <tech mergeMode="add" name="Always_AddAutoScoutSerp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <effect type="Data" amount="1.00" subtype="ProtoUnitFlag" flag="AutoScout" relativity="Absolute">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  AutoScout Military End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Buildings Hitpoints x2 Start  ##################################################### -->
  <!-- ############################################################################################################### -->
  
  
  <!-- The code should work for all civs and buildings, also newly added ones by mods or game updates -->
  
  <!-- BasePercent vs Percent: -->
  <!-- Lurker: "Base percent adds the value on the base stats of the units, percent is exponental and adds numerical value to the sum of other multipliers that increased the value." -->
  <!-- Eg Hitpoints is 750 and we use amount 3 two times with BasePercent: 750 + ((3-1)*750) + ((3-1)*750) = 3750 -->
   <!-- Or with amount 2 and 0.9: 750 + ((2-1)*750) + ((0.9-1)*750) = 1425 -->
  
   
   <!-- Im Spiel wird bei HitPoints immer BasePercent verwendet, dh. der Standard HP Wert ist relevant. -->
    <!-- Das erklärt warum die Devs in ArchaicAgeNorse Assign nehmen und nicht einfach 90%.  -->
     <!-- Aber so riesen Auswirkung wird das eigentlich nicht haben.. -->
      <!-- dennoch wäre es daher besser, dass wir es bei Assign belassen und unseren Multiplier dann danach ausführen (delay) -->
  
  
  
  <!-- to do sth always, regardless what age we start, load a savegame, which civ we are and so on, simply use an Obtainable Volatile tech without prereqs -->
   <!-- (when loading a savegame prereqs can not properly be checked or even can crash the game (typecount), so dont add them to Volatile+Obtainable techs. delay is only applied to the actions, not the prereqs check) -->
  <!-- This is also executed for Nature player!, to prevent this add ignoreNature to the target of efffects! -->
  
  <!-- An extra tech with short delay, to be executed AFTER the ArchaicAgeNorse "Assign" hardcoded HP values to the buildings.. -->
   <!-- ArmorVulnerability does not work with Assign/Override unfortunately.. so we add like 10% on top, not too much to make sure it does not reach 100% -->
    <!-- ArmorVulnerability Percent/BasePercent 0.4500 mit amount=0.2 = 0.34 ... und 0.3 mit amount=-0.1 = 0.37 -->
  <tech mergeMode="add" name="MultiplyBuildingHitPoints_Serp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <!-- *2 all buildings -->
      <effect type="Data" amount="2" subtype="Hitpoints" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">Building</target>
      </effect>
      
      <!-- already multiplied with 2, so to reach *4 another multiply with *2 -->
      <effect type="Data" amount="2.0" subtype="Hitpoints" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTownCenter</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTownCenter</target>
      </effect>
      <effect type="Data" amount="3.0" action="RangedAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTownCenter</target>
      </effect>
      
      <!-- already multiplied with 2, so to reach *3 another multiply with *1.5 -->
      <effect type="Data" amount="1.5" subtype="Hitpoints" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.0" action="RangedAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.0" action="FlyingUnitAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.0" action="HandAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.00" subtype="BuildLimit" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractTower</target>
      </effect>
      
      <!-- already multiplied with 2, so to reach *3 another multiply with *1.5 -->
      <effect type="Data" amount="1.5" subtype="Hitpoints" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractWall</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractWall</target>
      </effect>
      
      <!-- already multiplied with 2, so to reach *4 another multiply with *2 -->
      <effect type="Data" amount="2.0" subtype="Hitpoints" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Crush" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="3.0" action="RangedAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="3.0" action="FlyingUnitAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="3.0" action="HandAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="1.50" subtype="BuildLimit" relativity="Percent">
        <target ignoreNature='' type="ProtoUnit">AbstractFortress</target>
      </effect>

      
    </effects>
  </tech>
 
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  Buildings Hitpoints x2 End  ###################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Citadel in WonderAge Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  
  <!-- For Whatever reason the game crashes, if we do the TransformUnit to CitadelCenter in any other age than the WonderAge ?! -->
   <!-- no clue why.. but we want to add it to WonderAge anyways -->
  
  <!-- I think <flag>Volatile</flag> makes the tech check the prereqs as soon as it is obtainable (so does not need research) -->
  
  
  <tech name="WonderAgeGeneral">
    <effects>
      <effect mergeMode="add" type="TechStatus" status="obtainable">TownCenterToCitadel_Serp</effect>
      <effect mergeMode="add" type="TechStatus" status="obtainable">ExtraStrongCitadelForSekhmet_Serp</effect>
    </effects>
  </tech>
  
  <!-- transform all TownCenter to CitadelCenter as long as their is still a TownCenter and you still have the Wonder -->
   <!-- (this tech is needed to also transform newly built ones) -->
  <tech name="TownCenterToCitadel_Serp">
    <status>UNOBTAINABLE</status>
    <delay>0.500</delay>
    <flag>Volatile</flag>
    <flag>Persistent</flag>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <prereqs>
      <typecount unit="TownCenter" count="0.00" state="aliveState" operator="gt">
      </typecount>
      <typecount unit="Wonder" count="1.00" state="aliveState" operator="gte">
      </typecount>
      <specificage>MythicAge</specificage>
    </prereqs>
    <effects>
      <effect type="TransformUnit" fromprotoid="TownCenter" toprotoid="CitadelCenter">
      </effect>
    </effects>
  </tech>
  
  <!-- Sekhmet gets as compensation (he has the Citadel godpower) twice as many Hitpoints for AbstractTownCenter (includes CitadelCenter) -->
  <tech name="ExtraStrongCitadelForSekhmet_Serp">
    <status>UNOBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <prereqs>
      <techstatus status="Active">HeroicAgeSekhmet</techstatus>
    </prereqs>
    <effects>
      <effect type="Data" amount="2.00" subtype="Hitpoints" relativity="Percent">
        <target type="ProtoUnit">AbstractTownCenter</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  Citadel in WonderAge End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Free Relic on AgeUp Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- The code should work for all civs also newly added ones by mods or game updates, as long as they use the noral age up system -->
  
  <!-- specificage prereqs is a minimum, so ArchaicAge is always true, even while we are in MythicAge -->
    
  <!-- with an OBTAINABLE+Volatile tech we can start our tech code on new games and on savegames for every civ.  -->
   <!-- the OBTAINABLE+Volatile tech can not handle prereqs good, so we will change status from other techs in it which will do the prereqs code -->
  <!-- we use Volatile techs with specificage (instead of adding tickle tech to eg. ClassicalAgeGeneral) to have it compatible to savegames enabling this mod -->
  <!-- needs the delay in StartSpawnRelicCode_Serp for whatever reason to work properly for new and savegames -->
  <tech mergeMode="add" name="StartSpawnRelicCode_Serp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <effect type="TechStatus" status="obtainable">ArchaicSpawnRelic_Serp</effect>
      <effect type="TechStatus" status="obtainable">ClassicalSpawnRelic_Serp</effect>
      <effect type="TechStatus" status="obtainable">HeroicSpawnRelic_Serp</effect>
      <effect type="TechStatus" status="obtainable">MythicSpawnRelic_Serp</effect>
    </effects>
  </tech>
  
  <tech mergeMode="add" name="ArchaicSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>ArchaicAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
  <tech mergeMode="add" name="ClassicalSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>ClassicalAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
  <tech mergeMode="add" name="HeroicSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>HeroicAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
  <tech mergeMode="add" name="MythicSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>MythicAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
 
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  Free Relic on AgeUp End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  MirrorTower for All MythUnit Start  ################################################ -->
  <!-- ############################################################################################################### -->
  
  
  <tech name="AlwaysStuff_MirrorSerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>1.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <flag>NeverAutoResearch</flag>
    <effects>
      <effect type="TechStatus" status="obtainable">HeroicEnableMirror_Serp</effect>
      <!-- allow everyone to build it (otherwise they can not build on the construction site..) -->
      <effect type="Data" amount="1.00" subtype="CommandAdd" proto="MirrorTower" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">AbstractVillager</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" proto="MirrorTower" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">LogicalTypeNorseSoldierThatBuilds</target>
      </effect>
      
      
      <!-- test -->
      <!-- <effect type="Data" protoaction="AISpawnMirror_Serp" amount="1.00" subtype="ProtoActionAdd" unittype="SpawnMirrorHelper_Serp" addToTactics="1" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">AbstractTownCenter</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" protoaction="AISpawnMirror_Serp" amount="1.00" subtype="ProtoActionAdd" unittype="SpawnMirrorHelper_Serp" addToTactics="1" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">AbstractFortress</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="1.50" subtype="AutoBuildRate" relativity="Absolute"> -->
        <!-- <target type="ProtoUnit">MirrorTower</target> -->
      <!-- </effect> -->
      
      
      
    </effects>
  </tech>
  
  <!-- writing it like this instead of using HeroicAgeGeneral, to also affect savegames which are already Classical or higher -->
  <tech mergeMode="add" name="HeroicEnableMirror_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <flag>NeverAutoResearch</flag>
    <prereqs>
      <specificage>HeroicAge</specificage>
    </prereqs>
    <effects>
      <effect type="Data" amount="1.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect type="TechStatus" status="obtainable">MirrorForAI_Serp</effect>
    </effects>
  </tech>
  
  <!-- but still also add to HeroicAgeGeneral, because its required for proper tooltip and displaying it earlier in UI -->
  <tech name="HeroicAgeGeneral">
    <effects>
      <effect type="Data" amount="1.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <!-- ################################################################# -->
  <!-- add MirrorTower to most vanilla techs which affect SentryTower -->
  
  <tech name="LightningGeneral">
    <effects>
      <effect mergeMode="add" type="Data" amount="2.00" subtype="BuildPoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="ArchaicAgeEgyptian">
    <effects>
      <effect mergeMode="add" type="Data" amount="100.00" subtype="cost" resource="Gold" relativity="Override">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="0.00" subtype="cost" resource="Wood" relativity="Override">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <!-- at best we would simply replace the current SentryTower entries with AbstractTower -->
   <!-- but doing this at best compatible to other mods and game updates tinkering with the numbers is nearly impossible -->
    <!-- (because to replace/remove we have to define the exact amount values, which fails as soon as these get changed) -->
    <!-- (adding AbstractTower without removing SentryTower would result in 2 times buff for SentryTower) -->
  <tech name="BallistaTower">
    <effects>
      <effect mergeMode="add" type="Data" allactions="1" amount="1.33" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.50" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="ArchaicAgeNorse">
    <effects>
      <effect mergeMode="add" type="Data" amount="50.00" subtype="cost" resource="Wood" relativity="Assign">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="810.0" subtype="Hitpoints" relativity="Assign">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="Safeguard">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.25" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="GuardTower">
    <effects>
      <effect mergeMode="add" type="Data" allactions="1" amount="1.25" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.35" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="Crenellations">
    <effects>
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="2.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="RelicTowerOfSestus" type="Normal">
    <effects>
      <effect mergeMode="add" type="Data" allactions="1" amount="0.40" subtype="DamageBonus" unittype="MythUnit" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <!-- Helios gets some additional buffs for MirrorTower as compensation -->
  <tech name="MythicAgeHelios">
    <effects>
      <effect mergeMode="add" type="Data" amount="2.00" subtype="BuildLimit" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.1" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  
  
  <!-- autobuild for AI and spawning next to each Fortress/TownCenter -->
  <tech name="MirrorForAI_Serp">
    <status>UNOBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <flag>NeverAutoResearch</flag>
    <prereqs>
      <techstatus status="active">IsComputerPlayer_Serp</techstatus>
    </prereqs>
    <effects>
      <effect type="Data" protoaction="AISpawnMirror_Serp" amount="1.00" subtype="ProtoActionAdd" unittype="SpawnMirrorHelper_Serp" addToTactics="1" relativity="Assign">
        <target type="ProtoUnit">AbstractTownCenter</target>
      </effect>
      <effect type="Data" protoaction="AISpawnMirror_Serp" amount="1.00" subtype="ProtoActionAdd" unittype="SpawnMirrorHelper_Serp" addToTactics="1" relativity="Assign">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="0.50" subtype="AutoBuildRate" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  MirrorTower for All MythUnit End  ################################################ -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  No Formation Start  ######################################################### -->
  <!-- ############################################################################################################### -->
  
  
  <!-- Adding/Removing the AutoFormedUnit flag to make all MilitaryUnit ignore formation/use formation -->
  <!-- (this way they move eg. like villagers) -->
  
  
  
  <!-- Problem with adding a tech to toggle with CommandAdd: -->
   <!-- techs refuse to display on units with second page, like all military from Norse player ... -->
  <!-- Workaround: Instead of adding the tech in visible rows, we will make it invisible (row 255)  -->
   <!-- and use a command instead , which then will make the tech being researched... -->
   
   <!-- new techniques used in this mod (never used in vanilla): -->
    <!-- ConsoleCommand: <effect type="ConsoleCommand">setSquadMode("Line")</effect>  -->
    <!-- Command in proto_unit_command_mods: <command>researchTechInSelected("Remove_NonAutoFormedUnit_Serp")</command> -->
   

  <!-- with an OBTAINABLE+Volatile tech we can start our tech code on new games and on savegames for every civ.  -->
   <!-- the OBTAINABLE+Volatile tech can not handle prereqs good, so we will change status from other techs in it which will do the prereqs code -->
  <!-- we use Volatile techs with specificage (instead of adding tickle tech to eg. ClassicalAgeGeneral) to have it compatible to savegames enabling this mod -->
  <!-- needs the delay for whatever reason to work properly for new and savegames -->
  <tech mergeMode="add" name="Always_AddNoFormationSerp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="CNonAutoFormedUnit_Serp" row="2" column="5" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    
      <effect type="Data" amount="1.00" subtype="CommandAdd" tech="NonAutoFormedUnit_Serp" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" tech="Remove_NonAutoFormedUnit_Serp" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      
    </effects>
  </tech>
  
  
  <tech name="NonAutoFormedUnit_Serp">
    <status>OBTAINABLE</status>
    <displaynameid>STR_EDT_FORMCOMNDS</displaynameid>
		<rollovertextid>STR_EFFECT_ENABLE</rollovertextid>
    <icon>mod_icons\formation_check.png</icon>
    <researchpoints>0.1000</researchpoints>
    <flag>NeverAutoResearch</flag>
    <flag>InfiniteTech</flag>
    <effects>
      
      <!-- no clue if there is a command to set squadmode to nothing, tested: "" , nothing, "NoFormation" , "Default", -1   -->
      <!-- <effect type="ConsoleCommand">setSquadMode("")</effect> -->
      

      <effect type="Data" amount="0.00" subtype="ProtoUnitFlag" flag="AutoFormedUnit" relativity="Absolute">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      
      <effect type="Data" amount="1.00" subtype="CommandRemove" command="CNonAutoFormedUnit_Serp" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="CRemove_NonAutoFormedUnit_Serp" row="2" column="5" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    </effects>
  </tech>
  
  
  <tech name="Remove_NonAutoFormedUnit_Serp">
    <status>OBTAINABLE</status>
    <displaynameid>STR_EDT_FORMCOMNDS</displaynameid>
		<rollovertextid>STR_EFFECT_DISABLE</rollovertextid>
    <icon>mod_icons\formation_stop.png</icon>
    <researchpoints>0.1000</researchpoints>
    <flag>NeverAutoResearch</flag>
    <flag>InfiniteTech</flag>
    <effects>
    
      <!-- we can set the squadmode to Line to trigger a visible effect immediately after hitting the button... -->
       <!-- but maybe someone does not want this formation? Ah and it is no immediate effect it it is already Line.. -->
      <!-- <effect type="ConsoleCommand">setSquadMode("Line")</effect> -->
      
      <effect type="Data" amount="1.00" subtype="ProtoUnitFlag" flag="AutoFormedUnit" relativity="Absolute">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>      
      
      <effect type="Data" amount="1.00" subtype="CommandRemove" command="CRemove_NonAutoFormedUnit_Serp" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="CNonAutoFormedUnit_Serp" row="2" column="5" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    </effects>
  </tech>
  
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  No Formation End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Place Tower On Wall Start  ######################################################### -->
  <!-- ############################################################################################################### -->
  
  
  
  <!-- remove the PreventsWallBuilding flag from everything, so walls are no longer blocked by TownCenters and Goldmines.. -->
  
  <!-- to do sth always, regardless what age we start, load a savegame, which civ we are and so on, simply use an Obtainable Volatile tech without prereqs -->
   <!-- (when loading a savegame prereqs can not properly be checked or even can crash the game (typecount), so dont add them to Volatile+Obtainable techs. delay is only applied to the actions, not the prereqs check) -->
  
  <tech mergeMode="add" name="RemovePreventsWallBuilding_Serp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <effect mergeMode="add" type="Data" amount="-1.00" subtype="ProtoUnitFlag" flag="PreventsWallBuilding" relativity="Absolute">
        <target type="ProtoUnit">Unit</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="-1.00" subtype="ProtoUnitFlag" flag="PreventsWallBuilding" relativity="Absolute">
        <target type="ProtoUnit">Building</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="-1.00" subtype="ProtoUnitFlag" flag="PreventsWallBuilding" relativity="Absolute">
        <target type="ProtoUnit">NatureClass</target>
      </effect>
    </effects>
  </tech>
  

  
  <!-- ############################################################################################################### -->
  <!-- ############################  Place Tower On Wall End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  RevealUI Vision Spy Obelisk Start  ######################################################### -->
  <!-- ############################################################################################################### -->
  
  
  <tech name="AlwaysStuff_VisionSpySerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>3.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <!-- Enable OracleRevealEnemyUI Vision spell from Seth -->
      <effect type="Data" action="OracleRevealEnemyUI" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">VisionRevealer</target>
      </effect>
      <!-- for SpyEye/Obelisk we added the relevant part to protounit -->
      <effect type="Data" action="OracleRevealEnemyUI" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">SpyEye</target>
      </effect>
      <effect type="Data" action="OracleRevealEnemyUI" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">Obelisk</target>
      </effect>
      
      <!-- testing the godpowers -->
      <!-- <effect type="Data" subtype="GodPower" power="Spy" amount="1.0" cooldown="10" relativity="Absolute"> -->
        <!-- <target type="Player"> -->
        <!-- </target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" subtype="GodPower" power="Vision" amount="1.0" cooldown="10" relativity="Absolute"> -->
        <!-- <target type="Player"> -->
        <!-- </target> -->
      <!-- </effect> -->
      
    </effects>
  </tech>
  
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  RevealUI Vision Spy Obelisk End  ######################################################### -->
  <!-- ############################################################################################################### -->
  
  <!-- ########################################################################################################## -->
  <!-- ########################################################################################################## -->
    
  <!-- IsComputerPlayer_Serp IsNature_Serp IsHumanPlayer_Serp techs , used by multiple mods -->
  
  <tech name="Command_Check2IsHumanPlayer_Serp" type="Normal">
    <displaynameid>STR_HUD_UNIT_TYPE_HERO</displaynameid>
    <researchpoints>0.1000</researchpoints>
    <status>ACTIVE</status>
    <flag>HideAllNotifications</flag>
    <flag>NeverAutoResearch</flag>
  </tech>
  
  <!-- Helper techs to find out which player is human/computer/nature -->
  <!-- Copy paste all of the below techs into your mod. Do NOT add/change anything from there, also do not add effects (this way many mods can use the very same code without conflict)! -->
   <!-- Instead use eg prereqs <techstatus status="active">IsHumanPlayer_Serp</techstatus> and so on in your own techs. -->
   <!-- (use volatile flag if you want them to be executed as soon as prereqs is true ) -->
  <!-- General Notes: -->
   <!-- delay is done AFTER checking prereqs!  -->
   <!-- checking prereqs techstatus=Obtainable is also true after tech was set to active (except for Reversible techs)! -->
  <tech name="AlwaysCheckPlayers_Serp">
    <status>OBTAINABLE</status>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>0.5000</delay>
    <flag>DelayedFirstActivation</flag>
    <flag>NeverAutoResearch</flag>
    <effects>
      <effect type="TechStatus" status="obtainable">CheckIsHumanPlayer_Serp</effect>
      <effect type="TechStatus" status="obtainable">Check2IsHumanPlayer_Serp</effect>
      <effect type="TechStatus" status="obtainable">CheckIsNature_Serp</effect>
      <effect type="TechStatus" status="obtainable">DelayedCheckIsComputerPlayer_Serp</effect>
    </effects>
  </tech>
  <!-- Add hidden research to every Unit and every Building, so we can for sure research it via ConsoleCommand on every map -->
   <!-- prints a notification "Huamn is not ready for research" (even if only done for Unit) but still works, so its fine -->
  <!-- We make use of the fact that AIs can not "select" anything. So if execting player can select and research in selection, it is a human -->
  <tech name="CheckIsHumanPlayer_Serp">
    <status>UNOBTAINABLE</status>
    <flag>Volatile</flag>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>NeverAutoResearch</flag>
    <effects>
      <!-- <effect type="Data" amount="1.00" subtype="CommandAdd" tech="Check2IsHumanPlayer_Serp" row="255" column="255" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">Unit</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="1.00" subtype="CommandAdd" tech="Check2IsHumanPlayer_Serp" row="255" column="255" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">Building</target> -->
      <!-- </effect> -->
      <!-- <effect type="ConsoleCommand">uiSelectType("Unit", false, false)  researchTechInSelected("Check2IsHumanPlayer_Serp")  uiClearSelection()</effect>  -->
      <!-- <effect type="ConsoleCommand">uiSelectType("Building", false, false)  researchTechInSelected("Check2IsHumanPlayer_Serp")  uiClearSelection()</effect>  -->
    
      <!-- adding a command instead of a tech to everything, because a command always works on any page (economy/military),  -->
       <!-- but a tech causes problems on ability pages, so in this case it removes the ability from the SkyPassage -->
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="Command_Check2IsHumanPlayer_Serp" row="255" column="255" relativity="Override">
        <target type="ProtoUnit">Unit</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="Command_Check2IsHumanPlayer_Serp" row="255" column="255" relativity="Override">
        <target type="ProtoUnit">Building</target>
      </effect>
      <effect type="ConsoleCommand">uiSelectType("Unit", false, false)  commandResearchInSelected("Command_Check2IsHumanPlayer_Serp")  uiClearSelection()</effect> 
      <effect type="ConsoleCommand">uiSelectType("Building", false, false)  commandResearchInSelected("Command_Check2IsHumanPlayer_Serp")  uiClearSelection()</effect>
      
    </effects>
  </tech>
  <!-- <tech name="Check2IsHumanPlayer_Serp"> -->
    <!-- <status>OBTAINABLE</status> -->
    <!-- <displaynameid>STR_EDT_PDA_CNTR_HUMAN</displaynameid> -->
    <!-- <researchpoints>0.1000</researchpoints> -->
    <!-- <flag>HideAllNotifications</flag> -->
    <!-- <flag>HideFromDialogs</flag> -->
    <!-- <flag>NeverAutoResearch</flag> -->
    <!-- <effects> -->
      <!-- <effect type="TechStatus" status="active">IsHumanPlayer_Serp</effect> -->
    <!-- </effects> -->
  <!-- </tech> -->
  <tech name="Check2IsHumanPlayer_Serp">
    <status>UNOBTAINABLE</status>
    <flag>Volatile</flag>
    <displaynameid>STR_EDT_PDA_CNTR_HUMAN</displaynameid>
    <flag>HideAllNotifications</flag>
    <flag>HideFromDialogs</flag>
    <flag>NeverAutoResearch</flag>
    <prereqs>
      <typecount unit="HelperIsHuman_Serp" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="TechStatus" status="active">IsHumanPlayer_Serp</effect>
    </effects>
  </tech>
  <!-- we need an extra tech that is never set to Obtainable, to be able to check in prereqs for IsComputerPlayer_Serp -->
   <!-- techstatus=unobtainable. Because checking techstatus=Obtainable is also true after tech was set to active! -->
    <!-- (another workaround for volatile techs would be to use the flag Reversible, which removes the internal obtainable if active) -->
  <tech name="IsHumanPlayer_Serp">
    <status>UNOBTAINABLE</status>
    <displaynameid>STR_EDT_PDA_CNTR_HUMAN</displaynameid>
    <flag>HideAllNotifications</flag>
    <flag>HideFromDialogs</flag>
    <flag>NeverAutoResearch</flag>
    <effects>
      <effect type="TechStatus" status="active">IsNotNaturePlayer_Serp</effect>
      <!-- <effect type="CreateUnit" unit="Centaur" generator="AbstractTownCenter"> -->
        <!-- <pattern type="Leaving" speed="0.00" radius="0.00" quantity="2.00" minradius="0.00"> -->
          <!-- <offset x="0.00" y="0.00" z="0.00"> -->
          <!-- </offset> -->
        <!-- </pattern> -->
      <!-- </effect> -->
    </effects>
  </tech>
  
  <!-- checking who is nature player. Instead of only checking typecount for Tree/Resource and so on (which could falsely mark a player, since also players can sometimes own these things) -->
   <!-- we will spawn a ForceToNature helper object at any Nature thing in the world. Regardless who spawns it, it will be owned by Nature -->
  <!-- Hint: normally nature does not research anything in the techtree. So to execute sth for Nature, you need a tech that has status Obtainable+delay (so similar to the AlwaysCheckPlayers_Serp tech. Beware currently an Obtainalbe+Volatile tech crashes on startup if it has a prereqs. so make your prereqs techs obtainable in such a AlwaysCheckPlayers_Serp tech instead)  -->
    <!-- no prereqs in CheckIsNature_Serp, to execute it for everyone, so IsNature_Serp is set to Obtainable for everyone (so IsComputerPlayer_Serp can work) -->
  <tech name="CheckIsNature_Serp">
    <status>UNOBTAINABLE</status>
    <flag>Volatile</flag>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>NeverAutoResearch</flag>
    <effects>
      <!-- Nature does not work, but NatureClass -->
      <effect type="CreateUnit" unit="HelperIsNature_Serp" generator="NatureClass">
        <pattern type="Scatter" speed="0.00" radius="0.00" quantity="1.00" minradius="0.00">
          <offset x="-5.00" y="0.00" z="5.00">
          </offset>
        </pattern>
      </effect>
      <effect type="TechStatus" status="obtainable">IsNature_Serp</effect>
    </effects>
  </tech>
  <!-- adding Reversible flag only to remove the internal Obtainable status after it was set to active -->
  <tech name="IsNature_Serp">
    <status>UNOBTAINABLE</status>
    <flag>Volatile</flag>
    <flag>HideFromDialogs</flag>
    <flag>HideAllNotifications</flag>
    <flag>Reversible</flag>
    <flag>NeverAutoResearch</flag>
    <prereqs>
      <typecount unit="HelperIsNature_Serp" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <!-- <effect type="CreateUnit" unit="Minotaur" generator="AbstractSettlement"> -->
        <!-- <pattern type="Leaving" speed="0.00" radius="0.00" quantity="5.00" minradius="0.00"> -->
          <!-- <offset x="0.00" y="0.00" z="0.00"> -->
          <!-- </offset> -->
        <!-- </pattern> -->
      <!-- </effect> -->
    </effects>
  </tech>
  <!-- every player which has not IsHumanPlayer_Serp nor IsNature_Serp active after few more seconds, must be an AI -->
   <!-- we need this extra tech DelayedCheckIsComputerPlayer_Serp, because prereqs are checked before the delay -->
  <tech name="DelayedCheckIsComputerPlayer_Serp">
    <status>UNOBTAINABLE</status>
    <delay>3.0000</delay>
    <initialdelay>3.0000</initialdelay>
    <flag>Volatile</flag>
    <flag>HideAllNotifications</flag>
    <flag>HideFromDialogs</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>NeverAutoResearch</flag>
    <effects>
      <effect type="TechStatus" status="obtainable">IsComputerPlayer_Serp</effect>
    </effects>
  </tech>
  <!-- adding Reversible flag only to remove the internal Obtainable status after it was set to active -->
  <tech name="IsComputerPlayer_Serp">
    <status>UNOBTAINABLE</status>
    <flag>Volatile</flag>
    <displaynameid>STR_EDT_PDA_CNTR_COMPUTER</displaynameid>
    <flag>HideAllNotifications</flag>
    <flag>HideFromDialogs</flag>
    <flag>Reversible</flag>
    <flag>NeverAutoResearch</flag>
    <prereqs>
      <techstatus status="unobtainable">IsHumanPlayer_Serp</techstatus>
      <techstatus status="obtainable">IsNature_Serp</techstatus>
    </prereqs>
    <effects>
      <effect type="TechStatus" status="active">IsNotNaturePlayer_Serp</effect>
      
      <!-- <effect type="CreateUnit" unit="Cyclops" generator="AbstractTownCenter"> -->
        <!-- <pattern type="Leaving" speed="0.00" radius="0.00" quantity="2.00" minradius="0.00"> -->
          <!-- <offset x="0.00" y="0.00" z="0.00"> -->
          <!-- </offset> -->
        <!-- </pattern> -->
      <!-- </effect> -->
    </effects>
  </tech>
  
  <tech name="IsNotNaturePlayer_Serp">
    <status>UNOBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>HideFromDialogs</flag>
    <flag>NeverAutoResearch</flag>
  </tech>

  
  
</techtreemods>