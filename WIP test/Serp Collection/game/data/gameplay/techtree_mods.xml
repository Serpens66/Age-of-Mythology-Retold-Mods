<techtreemods>

  Info:
  <!-- a Volatile OBTAINABLE tech (OBTAINABLE from beginning) is also executed for Nature player! -->
  
  <!-- ############################################################################################################### -->
  <!-- ############################  RESPAWN RESOURCES Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- to do sth always, regardless what age we start, load a savegame, which civ we are and so on, simply use an Obtainable Volatile tech without prereqs -->
   <!-- (when loading a savegame prereqs can not properly be checked or even can crash the game (typecount), so dont add them to Volatile+Obtainable techs. delay is only applied to the actions, not the prereqs check) -->
  <!-- bei manchen sachen hilfts wohl auch n delay zuzufügen, bei anderen schadets.. -->
  <tech name="AlwaysStuff_RegenNatureSerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>3.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <!-- the respawn markers are using the animal grahipcs, but we make it smaller -->
      <effect mergeMode="add" type="Data" amount="0.2" subtype="AdditionalScale" relativity="Override">
        <target type="ProtoUnit">AbstractRespawnMarkerAnimal_Serp</target>
      </effect>
      
      
      <!-- <effect type="TechStatus" status="active">MakeTreesRespawn_Serp</effect> -->
    </effects>
  </tech>
  
  <!-- ##################################################################################################################### -->
  <!-- ##################################################################################################################### -->
  <!-- Attempt to make tree respawn code compatible for newly added trees.. but it does not work -->
  
  <!-- we could do all of the proto.xml Tree respawn code also in techtree EXCEPT decay=0. without decay=0 it is like ~5 seconds, which means it will show 2 stumps/trees -->
    <!-- for 5 seconds... only reason to do it in techtree might be better compatibility for newly added trees -->
     <!-- but that only works if we add the very same stump to all unittype=Tree that will always respawn the same tree (all trees will respawn as TreeOak) -->
      <!-- I could make all vanilla trees that exist currently in proto and still do some stuff in techtree for all later added trees (that will respawn as TreeOak always) -->
       <!-- but the problem is:  -->
        <!-- 1) how affect in techtree only later added trees? Needs workaround with unittype (removing "Tree" in prot and add Tree_Serp, do in techtree stuff for "Tree" which wil laffect new trees only and then add back Tree for the Tree_Serp) -->
        <!-- 2) to remove the "replacement" we have to define exactly what is written in there, also in techtree: -->
          <!-- <effect type="Data" amount="0.00" subtype="ModifyReplacement" replacementtype="Dead" proto="StumpOak" relativity="Assign"> -->
            <!-- <target type="ProtoUnit">Tree</target> -->
          <!-- </effect> -->
         <!-- But for newly added trees we can not know what kind of Stump they are using and stumps also have no unique unittype... -->
          <!-- AND it also does not work with <target type="ProtoUnit">Tree</target> to remove the replacement multiple times! -->
            <!-- if I do it once for StumpOak it works, if I do it once for StumpOakAutumn it also works. -->
             <!-- But it does not work for any, if I do both ?! -->
        <!-- That means it is impossible to make this work for all future added trees .. so simply stick to proto and only add current vanilla trees -->
  <!-- <tech name="MakeTreesRespawn_Serp"> -->
    <!-- <status>UNOBTAINABLE</status> -->
    <!-- <flag>HideAllNotifications</flag> -->
    <!-- <effects> -->
      <!-- <effect type="Data" amount="0.00" subtype="ModifyReplacement" replacementtype="Dead" proto="StumpOak" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">Tree</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="0.00" subtype="ModifyReplacement" replacementtype="Dead" proto="StumpOakAutumn" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">Tree</target> -->
      <!-- </effect> -->
      
      <!-- <effect type="Data" amount="1.00" subtype="ModifySpawn" spawntype="Dead" proto="StumpOak" skipplacementcheck="true" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">Tree</target> -->
      <!-- </effect> -->
      
      <!-- <effect type="Data" amount="1.00" subtype="ProtoUnitFlag" flag="ForceNormalDeathAnim" relativity="Absolute"> -->
        <!-- <target type="ProtoUnit">Tree</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="0.00" subtype="ProtoUnitFlag" flag="StartOnNoUpdate" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">Tree</target> -->
      <!-- </effect> -->
      
      
      
      <!-- <effect type="Data" amount="1.00" subtype="ModifySpawn" spawntype="Dead" proto="TreeOak" skipplacementcheck="true" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">StumpOak</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="1.00" subtype="ProtoUnitFlag" flag="ForceNormalDeathAnim" relativity="Absolute"> -->
        <!-- <target type="ProtoUnit">StumpOak</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="0.00" subtype="ProtoUnitFlag" flag="StartOnNoUpdate" relativity="Assign"> -->
        <!-- <target type="ProtoUnit">StumpOak</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="-1.00" subtype="UnitRegenRate" relativity="Override"> -->
        <!-- <target type="ProtoUnit">StumpOak</target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" amount="1200.0" subtype="Hitpoints" relativity="Override"> -->
        <!-- <target type="ProtoUnit">StumpOak</target> -->
      <!-- </effect> -->
      
      <!-- testing -->
      <!-- <effect type="Data" amount="10.0" subtype="Hitpoints" relativity="Override"> -->
        <!-- <target type="ProtoUnit">StumpOak</target> -->
      <!-- </effect> -->
     
    <!-- </effects> -->
  <!-- </tech> -->
  
  
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  RESPAWN RESOURCES End##  ######################################################## -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  AreaHeal TownCenter Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- adjusting ModifyTargetLimit for AreaHeal seems not to work..(also ModifyAmount is not what we are looking for) so we have to do it in proto_mods.xml -->
   <!-- but also increasing this value via tech does not work, so it stay at 2 units if I set this in proto. -->
    <!-- we can only compensate this with faster healing -->
  
  <!-- using AbstractSocketedTownCenter to only affect the owns build on settlements -->
  
  <!-- to do sth always, regardless what age we start, load a savegame, which civ we are and so on, simply use an Obtainable Volatile tech without prereqs -->
   <!-- (when loading a savegame prereqs can not properly be checked or even can crash the game (typecount), so dont add them to Volatile+Obtainable techs. delay is only applied to the actions, not the prereqs check) -->
  <!-- bei manchen sachen hilfts wohl auch n delay zuzufügen, bei anderen schadets.. -->
  <tech name="AlwaysStuff_AreaHealTCSerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>1.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="4.0" subtype="ModifyRate" relativity="Percent">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="FortifiedTownCenter">
    <effects>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="3.0" subtype="ModifyRate" relativity="Percent">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
    </effects>    
  </tech>
  
  <!-- compensation, double rate again for this research (it normally enables autoheal at 1/s for all units nearby) -->
  <tech name="FeastsOfRenown">
    <effects>
      <effect mergeMode="add" type="Data" action="AreaHeal" amount="2.0" subtype="ModifyRate" relativity="Percent">
        <target type="ProtoUnit">AbstractSocketedTownCenter</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  AreaHeal TownCenter End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  AutoScout Military Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- with an OBTAINABLE+Volatile tech we can start our tech code on new games and on savegames for every civ.  -->
   <!-- the OBTAINABLE+Volatile tech can not handle prereqs good, so we will change status from other techs in it which will do the prereqs code -->
  <!-- we use Volatile techs with specificage (instead of adding tickle tech to eg. ClassicalAgeGeneral) to have it compatible to savegames enabling this mod -->
  <!-- needs the delay for whatever reason to work properly for new and savegames -->
  <tech mergeMode="add" name="Always_AddAutoScoutSerp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <effect type="Data" amount="1.00" subtype="ProtoUnitFlag" flag="AutoScout" relativity="Absolute">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  AutoScout Military End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Buildings Hitpoints x2 Start  ##################################################### -->
  <!-- ############################################################################################################### -->
  
  
  <!-- The code should work for all civs and buildings, also newly added ones by mods or game updates -->
  
  <!-- BasePercent vs Percent: -->
  <!-- Lurker: "Base percent adds the value on the base stats of the units, percent is exponental and adds numerical value to the sum of other multipliers that increased the value." -->
  <!-- Eg Hitpoints is 750 and we use amount 3 two times with BasePercent: 750 + ((3-1)*750) + ((3-1)*750) = 3750 -->
   <!-- Or with amount 2 and 0.9: 750 + ((2-1)*750) + ((0.9-1)*750) = 1425 -->
  
   
   <!-- Im Spiel wird bei HitPoints immer BasePercent verwendet, dh. der Standard HP Wert ist relevant. -->
    <!-- Das erklärt warum die Devs in ArchaicAgeNorse Assign nehmen und nicht einfach 90%.  -->
     <!-- Aber so riesen Auswirkung wird das eigentlich nicht haben.. -->
      <!-- dennoch wäre es daher besser, dass wir es bei Assign belassen und unseren Multiplier dann danach ausführen (delay) -->
  
  
  
  <!-- to do sth always, regardless what age we start, load a savegame, which civ we are and so on, simply use an Obtainable Volatile tech without prereqs -->
   <!-- (when loading a savegame prereqs can not properly be checked or even can crash the game (typecount), so dont add them to Volatile+Obtainable techs. delay is only applied to the actions, not the prereqs check) -->
  
  <!-- An extra tech with short delay, to be executed AFTER the ArchaicAgeNorse "Assign" hardcoded HP values to the buildings.. -->
   <!-- ArmorVulnerability does not work with Assign/Override unfortunately.. so we add like 10% on top, not too much to make sure it does not reach 100% -->
    <!-- ArmorVulnerability Percent/BasePercent 0.4500 mit amount=0.2 = 0.34 ... und 0.3 mit amount=-0.1 = 0.37 -->
  <tech mergeMode="add" name="MultiplyBuildingHitPoints_Serp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      
      <effect type="Data" amount="3.0" subtype="Hitpoints" relativity="Percent">
        <target type="ProtoUnit">AbstractTownCenter</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target type="ProtoUnit">AbstractTownCenter</target>
      </effect>
      <effect type="Data" amount="3.0" action="RangedAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target type="ProtoUnit">AbstractTownCenter</target>
      </effect>
      
      <effect type="Data" amount="2.0" subtype="Hitpoints" relativity="Percent">
        <target type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.0" action="RangedAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.0" action="FlyingUnitAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.0" action="HandAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target type="ProtoUnit">AbstractTower</target>
      </effect>
      <effect type="Data" amount="2.00" subtype="BuildLimit" relativity="Percent">
        <target type="ProtoUnit">AbstractTower</target>
      </effect>
      
      <effect type="Data" amount="2.0" subtype="Hitpoints" relativity="Percent">
        <target type="ProtoUnit">AbstractWall</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target type="ProtoUnit">AbstractWall</target>
      </effect>
      
      <effect type="Data" amount="3.0" subtype="Hitpoints" relativity="Percent">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Hack" relativity="Percent">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="-0.10" subtype="ArmorVulnerability" armortype="Crush" relativity="Percent">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="3.0" action="RangedAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="3.0" action="FlyingUnitAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="3.0" action="HandAttack" subtype="Damage" damagetype="Pierce" relativity="Percent">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>
      <effect type="Data" amount="1.50" subtype="BuildLimit" relativity="Percent">
        <target type="ProtoUnit">AbstractFortress</target>
      </effect>

      
    </effects>
  </tech>
 
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  Buildings Hitpoints x2 End  ###################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Citadel in WonderAge Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  
  <!-- For Whatever reason the game crashes, if we do the TransformUnit to CitadelCenter in any other age than the WonderAge ?! -->
   <!-- no clue why.. but we want to add it to WonderAge anyways -->
  
  <!-- I think <flag>Volatile</flag> makes the tech check the prereqs as soon as it is obtainable (so does not need research) -->
  
  
  <tech name="WonderAgeGeneral">
    <effects>
      <effect mergeMode="add" type="TechStatus" status="obtainable">TownCenterToCitadel_Serp</effect>
      <effect mergeMode="add" type="TechStatus" status="obtainable">ExtraStrongCitadelForSekhmet_Serp</effect>
    </effects>
  </tech>
  
  <!-- transform all TownCenter to CitadelCenter as long as their is still a TownCenter and you still have the Wonder -->
   <!-- (this tech is needed to also transform newly built ones) -->
  <tech name="TownCenterToCitadel_Serp">
    <status>UNOBTAINABLE</status>
    <delay>0.500</delay>
    <flag>Volatile</flag>
    <flag>Persistent</flag>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <prereqs>
      <typecount unit="TownCenter" count="0.00" state="aliveState" operator="gt">
      </typecount>
      <typecount unit="Wonder" count="1.00" state="aliveState" operator="gte">
      </typecount>
      <specificage>MythicAge</specificage>
    </prereqs>
    <effects>
      <effect type="TransformUnit" fromprotoid="TownCenter" toprotoid="CitadelCenter">
      </effect>
    </effects>
  </tech>
  
  <!-- Sekhmet gets as compensation (he has the Citadel godpower) twice as many Hitpoints for AbstractTownCenter (includes CitadelCenter) -->
  <tech name="ExtraStrongCitadelForSekhmet_Serp">
    <status>UNOBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <prereqs>
      <techstatus status="Active">HeroicAgeSekhmet</techstatus>
    </prereqs>
    <effects>
      <effect type="Data" amount="2.00" subtype="Hitpoints" relativity="Percent">
        <target type="ProtoUnit">AbstractTownCenter</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  Citadel in WonderAge End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Free Relic on AgeUp Start  ######################################################## -->
  <!-- ############################################################################################################### -->
  
  
  <!-- The code should work for all civs also newly added ones by mods or game updates, as long as they use the noral age up system -->
  
  <!-- specificage prereqs is a minimum, so ArchaicAge is always true, even while we are in MythicAge -->
    
  <!-- with an OBTAINABLE+Volatile tech we can start our tech code on new games and on savegames for every civ.  -->
   <!-- the OBTAINABLE+Volatile tech can not handle prereqs good, so we will change status from other techs in it which will do the prereqs code -->
  <!-- we use Volatile techs with specificage (instead of adding tickle tech to eg. ClassicalAgeGeneral) to have it compatible to savegames enabling this mod -->
  <!-- needs the delay in StartSpawnRelicCode_Serp for whatever reason to work properly for new and savegames -->
  <tech mergeMode="add" name="StartSpawnRelicCode_Serp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <effect type="TechStatus" status="obtainable">ArchaicSpawnRelic_Serp</effect>
      <effect type="TechStatus" status="obtainable">ClassicalSpawnRelic_Serp</effect>
      <effect type="TechStatus" status="obtainable">HeroicSpawnRelic_Serp</effect>
      <effect type="TechStatus" status="obtainable">MythicSpawnRelic_Serp</effect>
    </effects>
  </tech>
  
  <tech mergeMode="add" name="ArchaicSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>ArchaicAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
  <tech mergeMode="add" name="ClassicalSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>ClassicalAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
  <tech mergeMode="add" name="HeroicSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>HeroicAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
  <tech mergeMode="add" name="MythicSpawnRelic_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>MythicAge</specificage>
      <typecount unit="AbstractTemple" count="1.00" state="aliveState" operator="gte">
      </typecount>
    </prereqs>
    <effects>
      <effect type="CreateUnit" unit="Relic" generator="AbstractTemple">
        <pattern type="Scatter" speed="0.00" radius="2.00" quantity="1.00" minradius="1.00">
          <offset x="-5.00" y="0.00" z="0.00">
          </offset>
        </pattern>
      </effect>
    </effects>
  </tech>
 
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  Free Relic on AgeUp End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  MirrorTower for All MythUnit Start  ################################################ -->
  <!-- ############################################################################################################### -->
  
  
  <tech name="AlwaysStuff_MirrorSerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>1.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <effect type="TechStatus" status="obtainable">HeroicEnableMirror_Serp</effect>
      <!-- allow everyone to build it (otherwise they can not build on the construction site..) -->
      <effect type="Data" amount="1.00" subtype="CommandAdd" proto="MirrorTower" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">AbstractVillager</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" proto="MirrorTower" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">LogicalTypeNorseSoldierThatBuilds</target>
      </effect>
    </effects>
  </tech>
  
  <!-- writing it like this instead of using HeroicAgeGeneral, to also affect savegames which are already Classical or higher -->
  <tech mergeMode="add" name="HeroicEnableMirror_Serp">
    <status>UNOBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <prereqs>
      <specificage>HeroicAge</specificage>
    </prereqs>
    <effects>
      <effect type="Data" amount="1.00" subtype="Enable" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <!-- ################################################################# -->
  <!-- add MirrorTower to most vanilla techs which affect SentryTower -->
  
  <tech name="LightningGeneral">
    <effects>
      <effect mergeMode="add" type="Data" amount="2.00" subtype="BuildPoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="ArchaicAgeEgyptian">
    <effects>
      <effect mergeMode="add" type="Data" amount="100.00" subtype="cost" resource="Gold" relativity="Override">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="0.00" subtype="cost" resource="Wood" relativity="Override">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <!-- at best we would simply replace the current SentryTower entries with AbstractTower -->
   <!-- but doing this at best compatible to other mods and game updates tinkering with the numbers is nearly impossible -->
    <!-- (because to replace/remove we have to define the exact amount values, which fails as soon as these get changed) -->
    <!-- (adding AbstractTower without removing SentryTower would result in 2 times buff for SentryTower) -->
  <tech name="BallistaTower">
    <effects>
      <effect mergeMode="add" type="Data" allactions="1" amount="1.33" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.50" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="ArchaicAgeNorse">
    <effects>
      <effect mergeMode="add" type="Data" amount="50.00" subtype="cost" resource="Wood" relativity="Assign">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="810.0" subtype="Hitpoints" relativity="Assign">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="Safeguard">
    <effects>
      <effect mergeMode="add" type="Data" amount="1.25" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="GuardTower">
    <effects>
      <effect mergeMode="add" type="Data" allactions="1" amount="1.25" subtype="Damage" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.35" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="Crenellations">
    <effects>
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="2.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <tech name="RelicTowerOfSestus" type="Normal">
    <effects>
      <effect mergeMode="add" type="Data" allactions="1" amount="0.40" subtype="DamageBonus" unittype="MythUnit" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  <!-- Helios gets some additional buffs for MirrorTower as compensation -->
  <tech name="MythicAgeHelios">
    <effects>
      <effect mergeMode="add" type="Data" amount="2.00" subtype="BuildLimit" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" action="RangedAttack" amount="1.0" subtype="MaximumRange" relativity="Absolute">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="1.1" subtype="Hitpoints" relativity="BasePercent">
        <target type="ProtoUnit">MirrorTower</target>
      </effect>
    </effects>
  </tech>
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  MirrorTower for All MythUnit End  ################################################ -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  No Formation Start  ######################################################### -->
  <!-- ############################################################################################################### -->
  
  
  <!-- Adding/Removing the AutoFormedUnit flag to make all MilitaryUnit ignore formation/use formation -->
  <!-- (this way they move eg. like villagers) -->
  
  
  
  <!-- Problem with adding a tech to toggle with CommandAdd: -->
   <!-- techs refuse to display on units with second page, like all military from Norse player ... -->
  <!-- Workaround: Instead of adding the tech in visible rows, we will make it invisible (row 255)  -->
   <!-- and use a command instead , which then will make the tech being researched... -->
   
   <!-- new techniques used in this mod (never used in vanilla): -->
    <!-- ConsoleCommand: <effect type="ConsoleCommand">setSquadMode("Line")</effect>  -->
    <!-- Command in proto_unit_command_mods: <command>researchTechInSelected("Remove_NonAutoFormedUnit_Serp")</command> -->
   

  <!-- with an OBTAINABLE+Volatile tech we can start our tech code on new games and on savegames for every civ.  -->
   <!-- the OBTAINABLE+Volatile tech can not handle prereqs good, so we will change status from other techs in it which will do the prereqs code -->
  <!-- we use Volatile techs with specificage (instead of adding tickle tech to eg. ClassicalAgeGeneral) to have it compatible to savegames enabling this mod -->
  <!-- needs the delay for whatever reason to work properly for new and savegames -->
  <tech mergeMode="add" name="Always_AddNoFormationSerp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="CNonAutoFormedUnit_Serp" row="2" column="5" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    
      <effect type="Data" amount="1.00" subtype="CommandAdd" tech="NonAutoFormedUnit_Serp" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" tech="Remove_NonAutoFormedUnit_Serp" row="255" column="255" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      
    </effects>
  </tech>
  
  
  <tech name="NonAutoFormedUnit_Serp">
    <status>OBTAINABLE</status>
    <displaynameid>STR_EDT_FORMCOMNDS</displaynameid>
		<rollovertextid>STR_EFFECT_ENABLE</rollovertextid>
    <icon>mod_icons\formation_check.png</icon>
    <researchpoints>0.1000</researchpoints>
    <flag>NeverAutoResearch</flag>
    <flag>InfiniteTech</flag>
    <effects>
      
      <!-- no clue if there is a command to set squadmode to nothing, tested: "" , nothing, "NoFormation" , "Default", -1   -->
      <!-- <effect type="ConsoleCommand">setSquadMode("")</effect> -->
      

      <effect type="Data" amount="0.00" subtype="ProtoUnitFlag" flag="AutoFormedUnit" relativity="Absolute">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      
      <effect type="Data" amount="1.00" subtype="CommandRemove" command="CNonAutoFormedUnit_Serp" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="CRemove_NonAutoFormedUnit_Serp" row="2" column="5" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    </effects>
  </tech>
  
  
  <tech name="Remove_NonAutoFormedUnit_Serp">
    <status>OBTAINABLE</status>
    <displaynameid>STR_EDT_FORMCOMNDS</displaynameid>
		<rollovertextid>STR_EFFECT_DISABLE</rollovertextid>
    <icon>mod_icons\formation_stop.png</icon>
    <researchpoints>0.1000</researchpoints>
    <flag>NeverAutoResearch</flag>
    <flag>InfiniteTech</flag>
    <effects>
    
      <!-- we can set the squadmode to Line to trigger a visible effect immediately after hitting the button... -->
       <!-- but maybe someone does not want this formation? Ah and it is no immediate effect it it is already Line.. -->
      <!-- <effect type="ConsoleCommand">setSquadMode("Line")</effect> -->
      
      <effect type="Data" amount="1.00" subtype="ProtoUnitFlag" flag="AutoFormedUnit" relativity="Absolute">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>      
      
      <effect type="Data" amount="1.00" subtype="CommandRemove" command="CRemove_NonAutoFormedUnit_Serp" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
      <effect type="Data" amount="1.00" subtype="CommandAdd" command="CNonAutoFormedUnit_Serp" row="2" column="5" relativity="Assign">
        <target type="ProtoUnit">MilitaryUnit</target>
      </effect>
    </effects>
  </tech>
  
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  No Formation End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  Place Tower On Wall Start  ######################################################### -->
  <!-- ############################################################################################################### -->
  
  
  
  <!-- remove the PreventsWallBuilding flag from everything, so walls are no longer blocked by TownCenters and Goldmines.. -->
  
  <!-- to do sth always, regardless what age we start, load a savegame, which civ we are and so on, simply use an Obtainable Volatile tech without prereqs -->
   <!-- (when loading a savegame prereqs can not properly be checked or even can crash the game (typecount), so dont add them to Volatile+Obtainable techs. delay is only applied to the actions, not the prereqs check) -->
  
  <tech mergeMode="add" name="RemovePreventsWallBuilding_Serp">
    <status>OBTAINABLE</status>
    <delay>1.0000</delay>
    <flag>HideAllNotifications</flag>
    <flag>DelayedFirstActivation</flag>
    <flag>Volatile</flag>
    <effects>
      <effect mergeMode="add" type="Data" amount="-1.00" subtype="ProtoUnitFlag" flag="PreventsWallBuilding" relativity="Absolute">
        <target type="ProtoUnit">Unit</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="-1.00" subtype="ProtoUnitFlag" flag="PreventsWallBuilding" relativity="Absolute">
        <target type="ProtoUnit">Building</target>
      </effect>
      <effect mergeMode="add" type="Data" amount="-1.00" subtype="ProtoUnitFlag" flag="PreventsWallBuilding" relativity="Absolute">
        <target type="ProtoUnit">NatureClass</target>
      </effect>
    </effects>
  </tech>
  

  
  <!-- ############################################################################################################### -->
  <!-- ############################  Place Tower On Wall End  ######################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################################################################################################### -->
  <!-- ############################  RevealUI Vision Spy Obelisk Start  ######################################################### -->
  <!-- ############################################################################################################### -->
  
  
  <tech name="AlwaysStuff_VisionSpySerp">
    <status>OBTAINABLE</status>
    <flag>HideAllNotifications</flag>
    <flag>Volatile</flag>
    <delay>3.0000</delay>
    <flag>DelayedFirstActivation</flag>
    <effects>
      <!-- Enable OracleRevealEnemyUI Vision spell from Seth -->
      <effect type="Data" action="OracleRevealEnemyUI" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">VisionRevealer</target>
      </effect>
      <!-- for SpyEye/Obelisk we added the relevant part to protounit -->
      <effect type="Data" action="OracleRevealEnemyUI" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">SpyEye</target>
      </effect>
      <effect type="Data" action="OracleRevealEnemyUI" amount="1.00" subtype="ActionEnable" relativity="Absolute">
        <target type="ProtoUnit">Obelisk</target>
      </effect>
      
      <!-- testing the godpowers -->
      <!-- <effect type="Data" subtype="GodPower" power="Spy" amount="1.0" cooldown="10" relativity="Absolute"> -->
        <!-- <target type="Player"> -->
        <!-- </target> -->
      <!-- </effect> -->
      <!-- <effect type="Data" subtype="GodPower" power="Vision" amount="1.0" cooldown="10" relativity="Absolute"> -->
        <!-- <target type="Player"> -->
        <!-- </target> -->
      <!-- </effect> -->
      
    </effects>
  </tech>
  
  
  
  <!-- ############################################################################################################### -->
  <!-- ############################  RevealUI Vision Spy Obelisk End  ######################################################### -->
  <!-- ############################################################################################################### -->
  
    
  
</techtreemods>