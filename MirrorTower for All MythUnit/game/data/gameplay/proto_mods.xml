<protomods>

  <!-- ein versuch sentrytwoer per command in MirrorTower umzuwandeln, aber buttons reagieren nicht, auch nicht in house umwandeln geht -->
   <!-- und auch VillagerGreek zu VillagerAtlantean geht nciht, button taucht nichtmal auf.. -->
    <!-- keine ahung... -->
  <!-- mit Ability DelayedTransform gehts, aber ability wird nicht angezeigt sobald auch nur eine tech im turm ist,  -->
  <!--  selbst wenns ne andere position ist und auch trotz ForceSecondPage... -->
  
  <!-- Daher Lösung jetzt: -->
   <!-- Dem Turm ein "Baumenü" mit weiteren Türmen zufügen, die als Baustelle platziert werden können! -->
    <!-- das klappt, aber man muss jeder einheit die es bauen können soll den train eintrag zufügen .. was es schonmal inkompatibel zu neuen Völkern macht... -->

  <!-- note: -->
   <!-- maxrange is not allowed to be 0, it breaks alot of stuff, especially abilities, if any maxrange is 0... -->

  <!-- add "building MirrorTower" to the SentryTower Menu, because there is enough space left  -->
    <!-- (while villagers dont have much space and also other mods may add buildings there, which is always incompatible  -->
    <!-- if two mods occupy the same slot.. so only reason to add it here is to maintain better compatibility to other mods and game updates) -->
  <unit name="SentryTower">
    <train row="2" column="0">SentryTower</train>
    <train row="2" column="1">MirrorTower</train>
    <!-- build action needed to allow placing the construction site -->
     <!-- in theory we even could allow SentryTower to actually build it :D -->
    <protoaction>
      <name>Build</name>
      <type>Build</type>
      <rate type="Building">0.000000</rate>
      <maxrange>0.001</maxrange>
      <!-- <rate type="Building">1.000000</rate> -->
      <!-- <maxrange>10.2</maxrange> -->
    </protoaction>
  </unit>
  
  <!-- add damage multiplier against MythUnit to MirrorTower -->
  <!-- and change damagetype to Divine and reduce stats a bit, because we will make it be affected by Tower researches -->
  <unit name="MirrorTower">
    <initialhitpoints mergeMode="modify">900.0000</initialhitpoints>
    <maxhitpoints mergeMode="modify">900.0000</maxhitpoints>
    <protoaction>
      <name>BeamAttack</name>
      <damage mergeMode="remove" type="Pierce"/>
      <damage mergeMode="add" type="Divine">10.000000</damage>
      <damagebonus mergeMode="add" type="MythUnit">7.000000</damagebonus>
      <damagebonus mergeMode="add" type="AbstractTitan">10.000000</damagebonus>
      <maxrange mergeMode="modify">20.000000</maxrange>
      <numberbounces mergeMode="add">5</numberbounces>
    </protoaction>
    
    <!-- allow to place more construction sites also from the mirror tower itself -->
    <train row="2" column="0">SentryTower</train>
    <train row="2" column="1">MirrorTower</train>
    <protoaction>
      <name>Build</name>
      <type>Build</type>
      <rate type="Building">0.000000</rate>
      <maxrange>0.001</maxrange>
    </protoaction>
    
  </unit>
  
  <!-- use a helper for the AISpawnMirror_Serp action and add it via tech to AbstractFortress and AbstractTownCenter, to also hit new buildings of this kind -->
   <!-- dont know how to spawn with 1 HP, but still ok -->
  <unit name="SpawnMirrorHelper_Serp">
    <obstructionradiusx>0.2000</obstructionradiusx>
    <obstructionradiusz>0.2000</obstructionradiusz>
    <movementtype>air</movementtype>
    <flag>Invulnerable</flag>
    <flag>NoIdleActions</flag>
    <flag>DoNotDieAtZeroHitpoints</flag>
    <flag>NoHPBar</flag>
    <flag>NonAutoFormedUnit</flag>
    <flag>DoNotShowOnMiniMap</flag>
    <flag>NotSelectable</flag>
    <flag>NotSearchable</flag>
    <flag>NoTieToGround</flag>
    <flag>NonCollideable</flag>
    <flag>DontRotateObstruction</flag>
    <flag>NotPlayerPlaceable</flag>
    <flag>NotKBTracked</flag>
    <flag>NotDeathTracked</flag>
    <tactics>dummy.tactics</tactics>
    <protoaction>
      <name>AISpawnMirror_Serp</name>
      <rate type="MirrorTower">1.0</rate>
      <active>1</active>
      <type>Maintain</type>
      <persistent>1</persistent>
      <pausable>0</pausable>
      <showqueuewhilewaiting>0</showqueuewhilewaiting>   
      <hidefromglobalqueue>1</hidefromglobalqueue>
      <maxrange>5.000000</maxrange>
      <modifytargetlimit>1</modifytargetlimit>
      <exclusive>1</exclusive>
      <maintaintrainpoints>30.0000</maintaintrainpoints>
      <modelattachment>vfx\glow\shrine_of_the_hunt_target.xml</modelattachment>
      <modelattachmentbone>bonethatdoesntexist</modelattachmentbone>
      <modelattachmenttimer>2500</modelattachmenttimer>
    </protoaction>
  </unit>
  
  
  <!-- ############################################################################### -->
  <!-- IsComputerPlayer_Serp IsNature_Serp IsHumanPlayer_Serp techs , used by multiple mods -->
  <unit name="HelperIsNature_Serp">
    <displaynameid>STR_MOTHER_NATURE</displaynameid>
    <animfile>misc\editor\cinematic_revealers\cinematic_revealer_to_all.xml</animfile>
    <obstructionradiusx>0.1000</obstructionradiusx>
    <obstructionradiusz>0.1000</obstructionradiusz>
    <movementtype>air</movementtype>
    <unittype>EmbellishmentClass</unittype>
    <flag>NoHPBar</flag>
    <flag>Immoveable</flag>
    <flag>NonAutoFormedUnit</flag>
    <flag>NoUnitAI</flag>
    <flag>NoIdleActions</flag>
    <flag>NonCollideable</flag>
    <flag>DoNotShowOnMiniMap</flag>
    <flag>NotSearchable</flag>
    <flag>TieToWaterSurface</flag>
    <flag>OnlyInEditor</flag>
    <flag>NotSelectable</flag>
    <flag>PlaceAnywhere</flag>
    <flag>NotDeathTracked</flag>
    <flag>DontRotateObstruction</flag>
    <flag>NotPlayerPlaceable</flag>
    <flag>ForceToNature</flag>
    <flag>Invulnerable</flag>
  </unit>
  
  <unit name="HelperIsHuman_Serp">
    <displaynameid>STR_EDT_PDA_CNTR_HUMAN</displaynameid>
    <animfile>misc\editor\cinematic_revealers\cinematic_revealer_to_all.xml</animfile>
    <obstructionradiusx>0.1000</obstructionradiusx>
    <obstructionradiusz>0.1000</obstructionradiusz>
    <movementtype>air</movementtype>
    <unittype>EmbellishmentClass</unittype>
    <flag>NoHPBar</flag>
    <flag>Immoveable</flag>
    <flag>NonAutoFormedUnit</flag>
    <flag>NoUnitAI</flag>
    <flag>NoIdleActions</flag>
    <flag>NonCollideable</flag>
    <flag>DoNotShowOnMiniMap</flag>
    <flag>NotSearchable</flag>
    <flag>TieToWaterSurface</flag>
    <flag>OnlyInEditor</flag>
    <flag>NotSelectable</flag>
    <flag>PlaceAnywhere</flag>
    <flag>NotDeathTracked</flag>
    <flag>DontRotateObstruction</flag>
    <flag>NotPlayerPlaceable</flag>
    <flag>Invulnerable</flag>
  </unit>
  
</protomods>